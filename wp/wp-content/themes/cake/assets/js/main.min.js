"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var c=0;c<this.length;c++)e.call(t,this[c],c,this)});var items=document.querySelectorAll(".cake__item");[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),c=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;c.appendChild(t?e:document.createTextNode(String(e)))}),this.appendChild(c)}})}),function(){var e=[window.Element,window.CharacterData,window.DocumentType],t=[];e.forEach(function(e){e&&t.push(e.prototype)}),t.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}();try{var btn=document.querySelector(".menu__menu"),block=document.querySelector(".menu__list");btn.addEventListener("click",function(){btn.classList.toggle("menu__menu-active"),btn.classList.contains("menu__menu-active")?block.style.display="block":block.style.display="none"})}catch(e){}try{var addClass=function(e,c,a){document.querySelectorAll(e).forEach(function(e){var t;e.classList.add(c),a&&((t=document.createElement("div")).classList.add(a),e.append(t))})};addClass(".footer li","footer__item","footer__line"),addClass(".header .header__list li","header__item","header__line"),addClass(".header__list-hamburger li","header__item-hamburger",!1);try{var burgerActive=document.createElement("div");burgerActive.classList.add("burger-line"),document.querySelector(".burger-active").append(burgerActive)}catch(e){}}catch(e){}try{items.forEach(function(e){e.addEventListener("mouseover",function(e){var t,c=e.target.closest(".cake__item");if(c&&!c.querySelector(".cake__info")){switch(c.dataset.element){case"1":t="cake__goRight";break;case"2":t="cake__goCenter";break;case"3":t="cake__goLeft"}var a=document.createElement("div");a.classList.add("cake__info",t),console.log(a),a.innerHTML='\n                <h3 class="cake__title">'.concat(c.dataset.name,'</h3>\n                <p class="cake__description">').concat(c.dataset.info,'</p>\n                <div class="cake__footer">\n                <span class="cake__gram">').concat(c.dataset.gramm,'г.</span>\n                <span class="cake__price">').concat(c.dataset.price,"Р</span>\n                "),c.append(a)}})}),items.forEach(function(e){e.addEventListener("mouseleave",function(e){document.querySelector(".cake__info").remove()})})}catch(e){}try{var checbox=document.querySelector(".application__label-checkbox"),button=document.querySelector(".application__submit");checbox.addEventListener("click",function(e){var t=checbox.querySelector(".application__checkbox-bad"),c=checbox.querySelector(".application__checkbox-bad-block");t.checked?(t.checked=!1,c.classList.remove("application__checkbox-bad-block-active"),button.classList.add("modal__disabled"),button.classList.remove("modal__submit")):(t.checked=!0,c.classList.add("application__checkbox-bad-block-active"),button.classList.remove("modal__disabled"),button.classList.add("modal__submit"))})}catch(e){}document.querySelectorAll("form").forEach(function(e){e.addEventListener("submit",function(e){e.preventDefault()})});try{var checkbox=document.querySelector(".modal__checkbox"),btnSubmit=document.querySelector(".modal__button"),applicationCheckBox=document.querySelector(".application__checkbox-bad"),applicationSubmit=document.querySelector(".application__submit");try{checkbox.addEventListener("change",function(){checkbox.checked?(btnSubmit.classList.remove("modal__disabled"),btnSubmit.classList.add("modal__submit")):(btnSubmit.classList.add("modal__disabled"),btnSubmit.classList.remove("modal__submit"))})}catch(e){}try{applicationCheckBox.addEventListener("change",function(e){applicationCheckBox.checked?(applicationSubmit.classList.remove("modal__disabled"),applicationSubmit.classList.add("modal__submit")):(applicationSubmit.classList.add("modal__disabled"),applicationSubmit.classList.remove("modal__submit"))})}catch(e){}}catch(e){}try{document.querySelector(".menu-icon").addEventListener("click",function(e){e.target.closest(".menu-icon").classList.toggle("clicked"),document.querySelector(".menu-icon").classList.contains("clicked")?document.querySelector(".header__list-hamburger").classList.add("active-list","header__list-hamburger-animate"):document.querySelector(".header__list-hamburger").classList.remove("active-list")})}catch(e){}try{var iframe=document.createElement("iframe")}catch(e){}try{var btns=document.querySelectorAll(".tort__click"),modal=document.querySelector(".modal"),dialog=document.querySelector(".modal__dialog"),_block=document.querySelector(".modal__block");btns.forEach(function(e){e.addEventListener("click",function(e){document.body.style.overflow="hidden",modal.style.transition="all 1s",modal.style.overflow="auto",modal.classList.add("modal-active");var t=e.target.closest(".tort__item"),c=document.createElement("div");c.classList.add("modal__infoTort"),c.innerHTML='\n                <h2 class="modal__title">Онлайн заказ торта</h2>\n                <div class="modal__info">\n                    <div class="modal__img-block">\n                        <img src="'.concat(t.dataset.img,'" alt="tort" class="modal__img">\n                    </div>\n                    <div class="modal__description">\n                        <h5 class="modal__name">').concat(t.dataset.nameTort,'</h5>\n                        <p class="modal__text">\n                            ').concat(t.dataset.description,'\n                        </p>\n                    </div>\n                </div>\n                <div class="modal__bottom">\n                    <div class="modal__line"></div>\n                    <div class="modal__opis">\n                        <div class="modal__gram">').concat(t.dataset.kg,' кг.</div>\n                        <div class="modal__price">').concat(t.dataset.rub," ₽</div>\n                    </div>\n                </div>\n            "),_block.append(c);var a=document.createElement("input");a.classList.add("input__hidden"),a.value=t.dataset.nameTort,document.querySelector(".hidden__label").append(a)})}),modal.addEventListener("click",function(e){e.target.classList.contains("modal")&&(document.body.style.overflow="",modal.style.transition="none",modal.classList.remove("modal-active"),modal.querySelector(".modal__infoTort").remove(),document.querySelector(".hidden__label").querySelector(".input__hidden").remove())})}catch(e){}try{var conts=document.querySelectorAll(".cont"),inputs=document.querySelector(".application").querySelectorAll(".application-input");conts.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest(".cont");t.querySelector("input").focus(),t.querySelector(".placeholder").style.display="none"})}),inputs.forEach(function(e){e.addEventListener("blur",function(e){""==e.target.value.trim()&&(e.target.parentElement.nextElementSibling.style.display="block")})})}catch(e){}try{var labels=document.querySelectorAll(".application__label");labels.forEach(function(e){e.addEventListener("click",function(e){var t=e.target.closest(".application__label").querySelector(".application__checkbox"),c=e.target.closest(".application__label").querySelector(".application__checkbox-block");t.checked||(document.querySelectorAll(".application__checkbox").forEach(function(e){e.previousElementSibling.classList.remove("application__checkbox-block-active")}),c.classList.add("application__checkbox-block-active"))})})}catch(e){}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var c=0;c<this.length;c++)e.call(t,this[c],c,this)});try{var addDots=function(){var a=document.createElement("div");a.classList.add("slider__dots"),elements.forEach(function(e,t){var c=document.createElement("div");c.classList.add("slider__dot"),c.setAttribute("data-count",t+1),0===t&&c.classList.add("slider__dot-active"),a.appendChild(c)}),document.querySelector(".slider").appendChild(a)},startInterval=function(){interval=setInterval(goNext,6e3)},changeDots=function(e,t){var c,a;e&&(slider.querySelectorAll(".slider__dot").forEach(function(e){e.classList.remove("slider__dot-active")}),e.target.classList.add("slider__dot-active"),c=e.target.getAttribute("data-count"),a=(count=c)*parseInt(width)-parseInt(width),content.style.transform="translateX(-".concat(a,"px)")),t&&slider.querySelectorAll(".slider__dot").forEach(function(e,t){e.classList.remove("slider__dot-active"),t+1===count&&e.classList.add("slider__dot-active")})},goNext=function(){var e;count===elements.length?(content.style.transform="translateX(0)",count=1):(e=(++count-1)*parseInt(width),content.style.transform="translateX(-".concat(e,"px)")),changeDots(null,"changeColor")},goPrev=function(){var e,t;1===count?(e=(elements.length-1)*parseInt(width)+"px",content.style.transform="translateX(-".concat(e,")"),count=elements.length):(t=--count*parseInt(width)-parseInt(width),content.style.transform="translateX(-".concat(t,"px)")),changeDots(null,"changeColor")};!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector,e.closest=e.closest||function(e){return this?this.matches(e)?this:this.parentElement?this.parentElement.closest(e):null:null}}(Element.prototype);var interval,width=window.getComputedStyle(document.querySelector(".slider__wrapper")).width,wrapper=document.querySelector(".slider__wrapper"),elements=document.querySelectorAll(".slider__item"),content=document.querySelector(".slider__content"),prev=document.querySelector(".slider__left"),next=document.querySelector(".slider__right"),slider=document.querySelector(".slider"),count=1;addDots(),content.style.width=elements.length*parseInt(width)+"px",next.addEventListener("click",goNext),prev.addEventListener("click",goPrev),startInterval(),wrapper.addEventListener("mouseenter",function(){clearInterval(interval)}),wrapper.addEventListener("mouseleave",function(){startInterval()}),slider.querySelectorAll(".slider__dot").forEach(function(e){e.addEventListener("click",function(e){return changeDots(e,null)})})}catch(e){}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY2FyZGVvbi5qcyIsImFkZENsYXNzLmpzIiwiY2FrZS5qcyIsImNoZWNrYm94LmpzIiwiZmV0Y2guanMiLCJmb3JtLmpzIiwiaGFtYnVyZ2VyLmpzIiwiaWZyYW1lLmpzIiwibW9kYWwuanMiLCJwbGFjZWhvbGRlci5qcyIsInJhZGlvYnV0dG9ucy5qcyIsInNsaWRlci5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJOb2RlTGlzdCIsInByb3RvdHlwZSIsImZvckVhY2giLCJjYWxsYmFjayIsInRoaXNBcmciLCJpIiwidGhpcyIsImxlbmd0aCIsImNhbGwiLCJpdGVtcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsIkVsZW1lbnQiLCJEb2N1bWVudCIsIkRvY3VtZW50RnJhZ21lbnQiLCJpdGVtIiwiaGFzT3duUHJvcGVydHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJnQXJyIiwiQXJyYXkiLCJzbGljZSIsImFyZ3VtZW50cyIsImRvY0ZyYWciLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiYXJnSXRlbSIsImlzTm9kZSIsIk5vZGUiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiU3RyaW5nIiwiYXJyIiwiQ2hhcmFjdGVyRGF0YSIsIkRvY3VtZW50VHlwZSIsImFyZ3MiLCJwdXNoIiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiYnRuIiwicXVlcnlTZWxlY3RvciIsImJsb2NrIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwic3R5bGUiLCJkaXNwbGF5IiwiX3VudXNlZCIsImFkZENsYXNzIiwic2VsZWN0b3IiLCJjbGFzc0xpIiwiY2xhc3NMaW5lIiwibGluZSIsImFkZCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmQiLCJidXJnZXJBY3RpdmUiLCJfdW51c2VkMiIsIl91bnVzZWQzIiwiZSIsInRyYW5DbGFzcyIsImJvZHkiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZGF0YXNldCIsImVsZW1lbnQiLCJlbCIsImNvbnNvbGUiLCJsb2ciLCJpbm5lckhUTUwiLCJjb25jYXQiLCJuYW1lIiwiaW5mbyIsImdyYW1tIiwicHJpY2UiLCJyZW1vdmUiLCJfdW51c2VkNCIsImNoZWNib3giLCJidXR0b24iLCJvbGRDaGVja0JveCIsIm5ld0NoZWNrQm94IiwiY2hlY2tlZCIsIl91bnVzZWQ1IiwicHJldmVudERlZmF1bHQiLCJjaGVja2JveCIsImJ0blN1Ym1pdCIsImFwcGxpY2F0aW9uQ2hlY2tCb3giLCJhcHBsaWNhdGlvblN1Ym1pdCIsIl91bnVzZWQ2IiwiX3VudXNlZDciLCJfdW51c2VkOCIsIl91bnVzZWQ5IiwiaWZyYW1lIiwiX3VudXNlZDEwIiwiYnRucyIsIm1vZGFsIiwiZGlhbG9nIiwib3ZlcmZsb3ciLCJ0cmFuc2l0aW9uIiwiaW1nIiwibmFtZVRvcnQiLCJkZXNjcmlwdGlvbiIsImtnIiwicnViIiwiaW5wdXRUb3J0IiwiX3VudXNlZDExIiwiY29udHMiLCJpbnB1dHMiLCJmb2N1cyIsInRyaW0iLCJwYXJlbnRFbGVtZW50IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiX3VudXNlZDEyIiwibGFiZWxzIiwib2xkQ2hlY2tCb3hzIiwibmV3Q2hlY2tCb3hzIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIl91bnVzZWQxMyIsImFkZERvdHMiLCJkb3RzIiwiZWxlbWVudHMiLCJpbmRleCIsImRvdCIsInNldEF0dHJpYnV0ZSIsInN0YXJ0SW50ZXJ2YWwiLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZ29OZXh0IiwiY2hhbmdlRG90cyIsImNvbG9yIiwicmVzdWx0Iiwic2xpZGVyIiwiZ2V0QXR0cmlidXRlIiwiY291bnQiLCJwYXJzZUludCIsIndpZHRoIiwiY29udGVudCIsInRyYW5zZm9ybSIsImdvUHJldiIsIkVMRU1FTlQiLCJtYXRjaGVzIiwibW96TWF0Y2hlc1NlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJvTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIndyYXBwZXIiLCJwcmV2IiwibmV4dCIsImNsZWFySW50ZXJ2YWwiLCJfdW51c2VkMTQiXSwibWFwcGluZ3MiOiJhQUFBQSxPQUFBQyxXQUFBQSxTQUFBQyxVQUFBQyxVQUNBRixTQUFBQyxVQUFBQyxRQUFBLFNBQUFDLEVBQUFDLEdBQ0FBLEVBQUFBLEdBQUFMLE9BQ0EsSUFBQSxJQUFBTSxFQUFBLEVBQUFBLEVBQUFDLEtBQUFDLE9BQUFGLElBQ0FGLEVBQUFLLEtBQUFKLEVBQUFFLEtBQUFELEdBQUFBLEVBQUFDLFFBSUEsSUFBQUcsTUFBQUMsU0FBQUMsaUJBQUEsZUF1QkEsQ0FBQUMsUUFBQVgsVUFBQVksU0FBQVosVUFBQWEsaUJBQUFiLFdBckJBQyxRQUFBLFNBQUFhLEdBQ0FBLEVBQUFDLGVBQUEsV0FHQUMsT0FBQUMsZUFBQUgsRUFBQSxTQUFBLENBQ0FJLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxVQUFBLEVBQ0FDLE1BQUEsV0FDQSxJQUFBQyxFQUFBQyxNQUFBdkIsVUFBQXdCLE1BQUFqQixLQUFBa0IsV0FDQUMsRUFBQWpCLFNBQUFrQix5QkFFQUwsRUFBQXJCLFFBQUEsU0FBQTJCLEdBQ0EsSUFBQUMsRUFBQUQsYUFBQUUsS0FDQUosRUFBQUssWUFBQUYsRUFBQUQsRUFBQW5CLFNBQUF1QixlQUFBQyxPQUFBTCxPQUdBdkIsS0FBQTBCLFlBQUFMLFFBS0EsV0FDQSxJQUFBUSxFQUFBLENBQUFwQyxPQUFBYSxRQUFBYixPQUFBcUMsY0FBQXJDLE9BQUFzQyxjQUNBQyxFQUFBLEdBRUFILEVBQUFqQyxRQUFBLFNBQUFhLEdBQ0FBLEdBQ0F1QixFQUFBQyxLQUFBeEIsRUFBQWQsYUFtQkFxQyxFQWJBcEMsUUFBQSxTQUFBYSxHQUNBQSxFQUFBQyxlQUFBLFdBR0FDLE9BQUFDLGVBQUFILEVBQUEsU0FBQSxDQUNBSSxjQUFBLEVBQ0FDLFlB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S0FDQUEsS0FBQTRHLGNBQ0E1RyxLQUFBNEcsY0FBQS9DLFFBQUFkLEdBREEsS0FGQSxNQUhBLENBUUF6QyxRQUFBWCxXQUNBLElBdUNBZ0ksU0F2Q0FVLE1BQUE1SSxPQUFBc0osaUJBQUEzSSxTQUFBaUMsY0FBQSxxQkFBQWdHLE1BQ0FXLFFBQUE1SSxTQUFBaUMsY0FBQSxvQkFDQWlGLFNBQUFsSCxTQUFBQyxpQkFBQSxpQkFDQWlJLFFBQUFsSSxTQUFBaUMsY0FBQSxvQkFDQTRHLEtBQUE3SSxTQUFBaUMsY0FBQSxpQkFDQTZHLEtBQUE5SSxTQUFBaUMsY0FBQSxrQkFDQTRGLE9BQUE3SCxTQUFBaUMsY0FBQSxXQUVBOEYsTUFBQSxFQXVCQWYsVUFHQWtCLFFBQUEzRixNQUFBMEYsTUFBQWYsU0FBQXJILE9BQUFtSSxTQUFBQyxPQUFBLEtBRUFhLEtBQUEzRyxpQkFBQSxRQUFBc0YsUUFDQW9CLEtBQUExRyxpQkFBQSxRQUFBaUcsUUFPQWQsZ0JBRUFzQixRQUFBekcsaUJBQUEsYUFBQSxXQUNBNEcsY0FBQXhCLFlBR0FxQixRQUFBekcsaUJBQUEsYUFBQSxXQUNBbUYsa0JBR0FPLE9BQUE1SCxpQkFBQSxnQkFBQVQsUUFBQSxTQUFBYSxHQUNBQSxFQUFBOEIsaUJBQUEsUUFBQSxTQUFBa0IsR0FBQSxPQUFBcUUsV0FBQXJFLEVBQUEsVUFvREEsTUFBQTJGIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpZiAod2luZG93Lk5vZGVMaXN0ICYmICFOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCkge1xyXG4gICAgTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICB0aGlzQXJnID0gdGhpc0FyZyB8fCB3aW5kb3c7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpc1tpXSwgaSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5jb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FrZV9faXRlbVwiKTtcclxuKGZ1bmN0aW9uIChhcnIpIHtcclxuICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIGlmIChpdGVtLmhhc093blByb3BlcnR5KCdhcHBlbmQnKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaXRlbSwgJ2FwcGVuZCcsIHtcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcclxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXBwZW5kKCkge1xyXG4gICAgICAgICAgdmFyIGFyZ0FyciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksXHJcbiAgICAgICAgICAgIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgXHJcbiAgICAgICAgICBhcmdBcnIuZm9yRWFjaChmdW5jdGlvbiAoYXJnSXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgaXNOb2RlID0gYXJnSXRlbSBpbnN0YW5jZW9mIE5vZGU7XHJcbiAgICAgICAgICAgIGRvY0ZyYWcuYXBwZW5kQ2hpbGQoaXNOb2RlID8gYXJnSXRlbSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFN0cmluZyhhcmdJdGVtKSkpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgXHJcbiAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKGRvY0ZyYWcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KShbRWxlbWVudC5wcm90b3R5cGUsIERvY3VtZW50LnByb3RvdHlwZSwgRG9jdW1lbnRGcmFnbWVudC5wcm90b3R5cGVdKTtcclxuICAoZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgYXJyID0gW3dpbmRvdy5FbGVtZW50LCB3aW5kb3cuQ2hhcmFjdGVyRGF0YSwgd2luZG93LkRvY3VtZW50VHlwZV07XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gIFxyXG4gICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICBhcmdzLnB1c2goaXRlbS5wcm90b3R5cGUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICBcclxuICAgIC8vIGZyb206aHR0cHM6Ly9naXRodWIuY29tL2pzZXJ6L2pzX3BpZWNlL2Jsb2IvbWFzdGVyL0RPTS9DaGlsZE5vZGUvcmVtb3ZlKCkvcmVtb3ZlKCkubWRcclxuICAgIChmdW5jdGlvbiAoYXJyKSB7XHJcbiAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uaGFzT3duUHJvcGVydHkoJ3JlbW92ZScpKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpdGVtLCAncmVtb3ZlJywge1xyXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pKGFyZ3MpO1xyXG4gIH0pKCk7XHJcbnRyeSB7XHJcbiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVfX21lbnVcIilcclxuICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51X19saXN0XCIpO1xyXG5cclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIGJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwibWVudV9fbWVudS1hY3RpdmVcIik7XHJcbiAgICAgICAgaWYgKGJ0bi5jbGFzc0xpc3QuY29udGFpbnMoXCJtZW51X19tZW51LWFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICBibG9jay5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJsb2NrLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSBjYXRjaCB7fSIsIlxyXG5cclxudHJ5IHtcclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzKHNlbGVjdG9yLCBjbGFzc0xpLCBjbGFzc0xpbmUpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoY2xhc3NMaSk7XHJcbiAgICAgICAgICAgIGlmIChjbGFzc0xpbmUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICAgICAgbGluZS5jbGFzc0xpc3QuYWRkKGNsYXNzTGluZSk7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZChsaW5lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGFkZENsYXNzKFwiLmZvb3RlciBsaVwiLCBcImZvb3Rlcl9faXRlbVwiLCBcImZvb3Rlcl9fbGluZVwiKTtcclxuICAgIGFkZENsYXNzKFwiLmhlYWRlciAuaGVhZGVyX19saXN0IGxpXCIsIFwiaGVhZGVyX19pdGVtXCIsIFwiaGVhZGVyX19saW5lXCIpO1xyXG4gICAgYWRkQ2xhc3MoXCIuaGVhZGVyX19saXN0LWhhbWJ1cmdlciBsaVwiLCBcImhlYWRlcl9faXRlbS1oYW1idXJnZXJcIiwgZmFsc2UpO1xyXG4gICAgXHJcbiAgIHRyeSB7XHJcbiAgICBjb25zdCBidXJnZXJBY3RpdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgYnVyZ2VyQWN0aXZlLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbGluZVwiKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLWFjdGl2ZVwiKS5hcHBlbmQoYnVyZ2VyQWN0aXZlKTtcclxuICAgfSBjYXRjaHt9XHJcbn0gY2F0Y2gge30iLCJ0cnkge1xyXG5cclxuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBlID0+IHtcclxuICAgICAgICBjb25zdCBib2R5ID0gZS50YXJnZXQuY2xvc2VzdChcIi5jYWtlX19pdGVtXCIpO1xyXG4gICAgICAgIGlmIChib2R5KSB7XHJcbiAgICAgICAgICAgIGxldCB0cmFuQ2xhc3M7XHJcbiAgICAgICAgICAgIGlmICghYm9keS5xdWVyeVNlbGVjdG9yKFwiLmNha2VfX2luZm9cIikpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaChib2R5LmRhdGFzZXQuZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbkNsYXNzID0gXCJjYWtlX19nb1JpZ2h0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuQ2xhc3MgPSBcImNha2VfX2dvQ2VudGVyXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiM1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5DbGFzcyA9IFwiY2FrZV9fZ29MZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJjYWtlX19pbmZvXCIsIHRyYW5DbGFzcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlbCk7XHJcbiAgICAgICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJjYWtlX190aXRsZVwiPiR7Ym9keS5kYXRhc2V0Lm5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiY2FrZV9fZGVzY3JpcHRpb25cIj4ke2JvZHkuZGF0YXNldC5pbmZvfTwvcD5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYWtlX19mb290ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FrZV9fZ3JhbVwiPiR7Ym9keS5kYXRhc2V0LmdyYW1tfdCzLjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FrZV9fcHJpY2VcIj4ke2JvZHkuZGF0YXNldC5wcmljZX3QoDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBib2R5LmFwcGVuZChlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcbml0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGUgPT4geyBcclxuICAgICAgICAvLyBjb25zdCBpbWcgPSBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbmMoXCJjYWtlX19pdGVtLWltZ1wiKTtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNha2VfX2luZm9cIikucmVtb3ZlKClcclxuXHJcbiAgICB9KVxyXG59KVxyXG59IGNhdGNoIHt9XHJcblxyXG4iLCJ0cnkge1xyXG4gICAgY29uc3QgY2hlY2JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbGljYXRpb25fX2xhYmVsLWNoZWNrYm94XCIpO1xyXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hcHBsaWNhdGlvbl9fc3VibWl0XCIpO1xyXG5cclxuICAgIGNoZWNib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgb2xkQ2hlY2tCb3ggPSBjaGVjYm94LnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbGljYXRpb25fX2NoZWNrYm94LWJhZFwiKTtcclxuICAgICAgICBjb25zdCBuZXdDaGVja0JveCA9IGNoZWNib3gucXVlcnlTZWxlY3RvcihcIi5hcHBsaWNhdGlvbl9fY2hlY2tib3gtYmFkLWJsb2NrXCIpO1xyXG5cclxuICAgICAgICBpZiAob2xkQ2hlY2tCb3guY2hlY2tlZCkge1xyXG4gICAgICAgICAgICBvbGRDaGVja0JveC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG5ld0NoZWNrQm94LmNsYXNzTGlzdC5yZW1vdmUoXCJhcHBsaWNhdGlvbl9fY2hlY2tib3gtYmFkLWJsb2NrLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX3N1Ym1pdFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvbGRDaGVja0JveC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgbmV3Q2hlY2tCb3guY2xhc3NMaXN0LmFkZChcImFwcGxpY2F0aW9uX19jaGVja2JveC1iYWQtYmxvY2stYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19kaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fc3VibWl0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0gY2F0Y2gge30iLCJkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZm9ybVwiKS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSlcclxufSkiLCJ0cnkge1xyXG4gICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jaGVja2JveFwiKTtcclxuICAgIGNvbnN0IGJ0blN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIGNvbnN0IGFwcGxpY2F0aW9uQ2hlY2tCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFwcGxpY2F0aW9uX19jaGVja2JveC1iYWRcIik7XHJcbiAgICBjb25zdCBhcHBsaWNhdGlvblN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbGljYXRpb25fX3N1Ym1pdFwiKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgYnRuU3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICBidG5TdWJtaXQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXRcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidG5TdWJtaXQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19kaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgICAgIGJ0blN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX3N1Ym1pdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGNhdGNoe31cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwbGljYXRpb25DaGVja0JveC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhcHBsaWNhdGlvbkNoZWNrQm94LmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uU3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvblN1Ym1pdC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX3N1Ym1pdFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uU3VibWl0LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhdGlvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfX3N1Ym1pdFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9IGNhdGNoIHt9XHJcbn0gY2F0Y2gge31cclxuXHJcblxyXG4iLCJ0cnkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWljb25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgZS50YXJnZXQuY2xvc2VzdChcIi5tZW51LWljb25cIikuY2xhc3NMaXN0LnRvZ2dsZShcImNsaWNrZWRcIik7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1pY29uXCIpLmNsYXNzTGlzdC5jb250YWlucyhcImNsaWNrZWRcIikpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2xpc3QtaGFtYnVyZ2VyXCIpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtbGlzdFwiLCBcImhlYWRlcl9fbGlzdC1oYW1idXJnZXItYW5pbWF0ZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbGlzdC1oYW1idXJnZXJcIikuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1saXN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0gY2F0Y2gge30iLCJ0cnkge1xyXG4gICAgbGV0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XHJcbiAgICBcclxuICAgIC8vIGh0dHBzOi8veWFuZGV4LnJ1L21hcC13aWRnZXQvdjEvP3VtPWNvbnN0cnVjdG9yJTNBOTI2MzZiMzQ5ZWIwNmYwY2M1YjlkNDMyM2VhMGYxZWIwMzFkNjM5OTkyNGUwZTBjMTcyODg2YjU3YjVjMWE3OSZhbXA7c291cmNlPWNvbnN0cnVjdG9yXHJcbn1jYXRjaCB7fSIsInRyeSB7XHJcbiAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b3J0X19jbGlja1wiKTtcclxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuICAgIGNvbnN0IGRpYWxvZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2RpYWxvZ1wiKTtcclxuICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYmxvY2tcIik7XHJcblxyXG5cclxuXHJcbiAgICBidG5zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgICAgIG1vZGFsLnN0eWxlLnRyYW5zaXRpb24gPSBcImFsbCAxc1wiO1xyXG4gICAgICAgICAgICBtb2RhbC5zdHlsZS5vdmVyZmxvdyA9IFwiYXV0b1wiO1xyXG4gICAgICAgICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWwtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KFwiLnRvcnRfX2l0ZW1cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9faW5mb1RvcnRcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGgyIGNsYXNzPVwibW9kYWxfX3RpdGxlXCI+0J7QvdC70LDQudC9INC30LDQutCw0Lcg0YLQvtGA0YLQsDwvaDI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfX2luZm9cIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfX2ltZy1ibG9ja1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7dGFyZ2V0LmRhdGFzZXQuaW1nfVwiIGFsdD1cInRvcnRcIiBjbGFzcz1cIm1vZGFsX19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWxfX2Rlc2NyaXB0aW9uXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz1cIm1vZGFsX19uYW1lXCI+JHt0YXJnZXQuZGF0YXNldC5uYW1lVG9ydH08L2g1PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cIm1vZGFsX190ZXh0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3RhcmdldC5kYXRhc2V0LmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9fYm90dG9tXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX19saW5lXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsX19vcGlzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9fZ3JhbVwiPiR7dGFyZ2V0LmRhdGFzZXQua2d9INC60LMuPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbF9fcHJpY2VcIj4ke3RhcmdldC5kYXRhc2V0LnJ1Yn0g4oK9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgYmxvY2suYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dFRvcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgIGlucHV0VG9ydC5jbGFzc0xpc3QuYWRkKFwiaW5wdXRfX2hpZGRlblwiKTtcclxuICAgICAgICAgICAgaW5wdXRUb3J0LnZhbHVlID0gdGFyZ2V0LmRhdGFzZXQubmFtZVRvcnQ7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGlkZGVuX19sYWJlbFwiKS5hcHBlbmQoaW5wdXRUb3J0KTtcclxuXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSBcIlwiO1xyXG4gICAgICAgICAgICBtb2RhbC5zdHlsZS50cmFuc2l0aW9uID0gXCJub25lXCI7XHJcbiAgICAgICAgICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIG1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2luZm9Ub3J0XCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhpZGRlbl9fbGFiZWxcIikucXVlcnlTZWxlY3RvcihcIi5pbnB1dF9faGlkZGVuXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0gY2F0Y2gge30iLCJ0cnkge1xyXG4gICAgY29uc3QgY29udHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbnRcIik7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFwcGxpY2F0aW9uXCIpLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXBwbGljYXRpb24taW5wdXRcIik7XHJcblxyXG5cclxuXHJcbiAgICBjb250cy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdChcIi5jb250XCIpO1xyXG4gICAgICAgIHRhcmdldC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuZm9jdXMoKTtcclxuICAgICAgICB0YXJnZXQucXVlcnlTZWxlY3RvcihcIi5wbGFjZWhvbGRlclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG4gICAgaW5wdXRzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUudHJpbSgpID09ICcnKVxyXG4gICAgICAgICAgICBlLnRhcmdldC5wYXJlbnRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZy5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59IGNhdGNoIHt9XHJcblxyXG4iLCJ0cnkge1xyXG4gICAgY29uc3QgbGFiZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcHBsaWNhdGlvbl9fbGFiZWxcIik7XHJcblxyXG4gICAgbGFiZWxzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG9sZENoZWNrQm94cyA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIuYXBwbGljYXRpb25fX2xhYmVsXCIpLnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbGljYXRpb25fX2NoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0NoZWNrQm94cyA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIuYXBwbGljYXRpb25fX2xhYmVsXCIpLnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbGljYXRpb25fX2NoZWNrYm94LWJsb2NrXCIpXHJcblxyXG4gICAgICAgICAgICBpZiAoIW9sZENoZWNrQm94cy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFwcGxpY2F0aW9uX19jaGVja2JveFwiKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKFwiYXBwbGljYXRpb25fX2NoZWNrYm94LWJsb2NrLWFjdGl2ZVwiKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIG5ld0NoZWNrQm94cy5jbGFzc0xpc3QuYWRkKFwiYXBwbGljYXRpb25fX2NoZWNrYm94LWJsb2NrLWFjdGl2ZVwiKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBpZiAob2xkQ2hlY2tCb3hzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgLy8gICAgIG9sZENoZWNrQm94cy5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vICAgICBuZXdDaGVja0JveHMuY2xhc3NMaXN0LnJlbW92ZShcImFwcGxpY2F0aW9uX19jaGVja2JveC1ibG9jay1hY3RpdmVcIilcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgIG9sZENoZWNrQm94cy5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgIG5ld0NoZWNrQm94cy5jbGFzc0xpc3QuYWRkKFwiYXBwbGljYXRpb25fX2NoZWNrYm94LWJsb2NrLWFjdGl2ZVwiKVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn0gY2F0Y2gge30iLCJpZiAod2luZG93Lk5vZGVMaXN0ICYmICFOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCkge1xyXG4gICAgTm9kZUxpc3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICB0aGlzQXJnID0gdGhpc0FyZyB8fCB3aW5kb3c7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpc1tpXSwgaSwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG50cnkge1xyXG4gICAgLy8gaWYgKCFBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkge1xyXG5cclxuICAgIC8vICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICBcclxuICAgIC8vICAgICAgIHZhciBULCBrO1xyXG4gICAgICBcclxuICAgIC8vICAgICAgIGlmICh0aGlzID09IG51bGwpIHtcclxuICAgIC8vICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignIHRoaXMgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xyXG4gICAgLy8gICAgICAgfVxyXG4gICAgICBcclxuICAgIC8vICAgICAgIC8vIDEuINCf0L7Qu9C+0LbQuNC8IE8g0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCBUb09iamVjdCBwYXNzaW5nIHRoZSB8dGhpc3wgdmFsdWUgYXMgdGhlIGFyZ3VtZW50LlxyXG4gICAgLy8gICAgICAgdmFyIE8gPSBPYmplY3QodGhpcyk7XHJcbiAgICAgIFxyXG4gICAgLy8gICAgICAgLy8gMi4g0J/QvtC70L7QttC40LwgbGVuVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBcImxlbmd0aFwiLlxyXG4gICAgLy8gICAgICAgLy8gMy4g0J/QvtC70L7QttC40LwgbGVuINGA0LDQstC90YvQvCBUb1VpbnQzMihsZW5WYWx1ZSkuXHJcbiAgICAvLyAgICAgICB2YXIgbGVuID0gTy5sZW5ndGggPj4+IDA7XHJcbiAgICAgIFxyXG4gICAgLy8gICAgICAgLy8gNC4g0JXRgdC70LggSXNDYWxsYWJsZShjYWxsYmFjaykg0YDQsNCy0LXQvSBmYWxzZSwg0LLRi9C60LjQvdC10Lwg0LjRgdC60LvRjtGH0LXQvdC40LUgVHlwZUVycm9yLlxyXG4gICAgLy8gICAgICAgLy8g0KHQvNC+0YLRgNC40YLQtTogaHR0cDovL2VzNS5naXRodWIuY29tLyN4OS4xMVxyXG4gICAgLy8gICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgLy8gICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoY2FsbGJhY2sgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XHJcbiAgICAvLyAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgLy8gICAgICAgLy8gNS4g0JXRgdC70LggdGhpc0FyZyDQv9GA0LjRgdGD0YLRgdGC0LLRg9C10YIsINC/0L7Qu9C+0LbQuNC8IFQg0YDQsNCy0L3Ri9C8IHRoaXNBcmc7INC40L3QsNGH0LUg0L/QvtC70L7QttC40LwgVCDRgNCw0LLQvdGL0LwgdW5kZWZpbmVkLlxyXG4gICAgLy8gICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XHJcbiAgICAvLyAgICAgICAgIFQgPSB0aGlzQXJnO1xyXG4gICAgLy8gICAgICAgfVxyXG4gICAgICBcclxuICAgIC8vICAgICAgIC8vIDYuINCf0L7Qu9C+0LbQuNC8IGsg0YDQsNCy0L3Ri9C8IDBcclxuICAgIC8vICAgICAgIGsgPSAwO1xyXG4gICAgICBcclxuICAgIC8vICAgICAgIC8vIDcuINCf0L7QutCwIGsgPCBsZW4sINCx0YPQtNC10Lwg0L/QvtCy0YLQvtGA0Y/RgtGMXHJcbiAgICAvLyAgICAgICB3aGlsZSAoayA8IGxlbikge1xyXG4gICAgICBcclxuICAgIC8vICAgICAgICAgdmFyIGtWYWx1ZTtcclxuICAgICAgXHJcbiAgICAvLyAgICAgICAgIC8vIGEuINCf0L7Qu9C+0LbQuNC8IFBrINGA0LDQstC90YvQvCBUb1N0cmluZyhrKS5cclxuICAgIC8vICAgICAgICAgLy8gICDQrdGC0L4g0L3QtdGP0LLQvdC+0LUg0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjQtSDQtNC70Y8g0LvQtdCy0L7RgdGC0L7RgNC+0L3QvdC10LPQviDQvtC/0LXRgNCw0L3QtNCwINCyINC+0L/QtdGA0LDRgtC+0YDQtSBpblxyXG4gICAgLy8gICAgICAgICAvLyBiLiDQn9C+0LvQvtC20LjQvCBrUHJlc2VudCDRgNCw0LLQvdGL0Lwg0YDQtdC30YPQu9GM0YLQsNGC0YMg0LLRi9C30L7QstCwINCy0L3Rg9GC0YDQtdC90L3QtdCz0L4g0LzQtdGC0L7QtNCwIEhhc1Byb3BlcnR5INC+0LHRitC10LrRgtCwIE8g0YEg0LDRgNCz0YPQvNC10L3RgtC+0LwgUGsuXHJcbiAgICAvLyAgICAgICAgIC8vICAg0K3RgtC+0YIg0YjQsNCzINC80L7QttC10YIg0LHRi9GC0Ywg0L7QsdGK0LXQtNC40L3RkdC9INGBINGI0LDQs9C+0LwgY1xyXG4gICAgLy8gICAgICAgICAvLyBjLiDQldGB0LvQuCBrUHJlc2VudCDRgNCw0LLQtdC9IHRydWUsINGC0L5cclxuICAgIC8vICAgICAgICAgaWYgKGsgaW4gTykge1xyXG4gICAgICBcclxuICAgIC8vICAgICAgICAgICAvLyBpLiDQn9C+0LvQvtC20LjQvCBrVmFsdWUg0YDQsNCy0L3Ri9C8INGA0LXQt9GD0LvRjNGC0LDRgtGDINCy0YvQt9C+0LLQsCDQstC90YPRgtGA0LXQvdC90LXQs9C+INC80LXRgtC+0LTQsCBHZXQg0L7QsdGK0LXQutGC0LAgTyDRgSDQsNGA0LPRg9C80LXQvdGC0L7QvCBQay5cclxuICAgIC8vICAgICAgICAgICBrVmFsdWUgPSBPW2tdO1xyXG4gICAgICBcclxuICAgIC8vICAgICAgICAgICAvLyBpaS4g0JLRi9C30L7QstC10Lwg0LLQvdGD0YLRgNC10L3QvdC40Lkg0LzQtdGC0L7QtCBDYWxsINGE0YPQvdC60YbQuNC4IGNhbGxiYWNrINGBINC+0LHRitC10LrRgtC+0LwgVCDQsiDQutCw0YfQtdGB0YLQstC1INC30L3QsNGH0LXQvdC40Y8gdGhpcyDQuFxyXG4gICAgLy8gICAgICAgICAgIC8vINGB0L/QuNGB0LrQvtC8INCw0YDQs9GD0LzQtdC90YLQvtCyLCDRgdC+0LTQtdGA0LbQsNGJ0LjQvCBrVmFsdWUsIGsg0LggTy5cclxuICAgIC8vICAgICAgICAgICBjYWxsYmFjay5jYWxsKFQsIGtWYWx1ZSwgaywgTyk7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgLy8gZC4g0KPQstC10LvQuNGH0LjQvCBrINC90LAgMS5cclxuICAgIC8vICAgICAgICAgaysrO1xyXG4gICAgLy8gICAgICAgfVxyXG4gICAgLy8gICAgICAgLy8gOC4g0JLQtdGA0L3RkdC8IHVuZGVmaW5lZC5cclxuICAgIC8vICAgICB9O1xyXG4gICAgLy8gICB9XHJcbiAgICAgIChmdW5jdGlvbihFTEVNRU5UKSB7XHJcbiAgICAgICAgRUxFTUVOVC5tYXRjaGVzID0gRUxFTUVOVC5tYXRjaGVzIHx8IEVMRU1FTlQubW96TWF0Y2hlc1NlbGVjdG9yIHx8IEVMRU1FTlQubXNNYXRjaGVzU2VsZWN0b3IgfHwgRUxFTUVOVC5vTWF0Y2hlc1NlbGVjdG9yIHx8IEVMRU1FTlQud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xyXG4gICAgICAgIEVMRU1FTlQuY2xvc2VzdCA9IEVMRU1FTlQuY2xvc2VzdCB8fCBmdW5jdGlvbiBjbG9zZXN0KHNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcykgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoZXMoc2VsZWN0b3IpKSByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudEVsZW1lbnQpIHtyZXR1cm4gbnVsbH1cclxuICAgICAgICAgICAgZWxzZSByZXR1cm4gdGhpcy5wYXJlbnRFbGVtZW50LmNsb3Nlc3Qoc2VsZWN0b3IpXHJcbiAgICAgICAgICB9O1xyXG4gICAgfShFbGVtZW50LnByb3RvdHlwZSkpO1xyXG4gICAgY29uc3Qgd2lkdGggPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fd3JhcHBlclwiKSkud2lkdGg7XHJcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zbGlkZXJfX3dyYXBwZXJcIik7XHJcbiAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyX19pdGVtXCIpO1xyXG4gICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19jb250ZW50XCIpO1xyXG4gICAgY29uc3QgcHJldiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19sZWZ0XCIpO1xyXG4gICAgY29uc3QgbmV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyX19yaWdodFwiKTtcclxuICAgIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyXCIpO1xyXG5cclxubGV0IGNvdW50ID0gMTtcclxuZnVuY3Rpb24gYWRkRG90cygpIHtcclxuICAgIGNvbnN0IGRvdHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZG90cy5jbGFzc0xpc3QuYWRkKFwic2xpZGVyX19kb3RzXCIpO1xyXG5cclxuXHJcbiAgICBlbGVtZW50cy5mb3JFYWNoKChlbCwgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXHJcbiAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoXCJzbGlkZXJfX2RvdFwiKTtcclxuICAgICAgICBkb3Quc2V0QXR0cmlidXRlKFwiZGF0YS1jb3VudFwiLCBpbmRleCArIDEpXHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QuYWRkKFwic2xpZGVyX19kb3QtYWN0aXZlXCIpOyAgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRvdHMuYXBwZW5kQ2hpbGQoZG90KTtcclxuICAgIH0pXHJcblxyXG4gICAgLy8gZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHJcbiAgICAvLyB9XHJcblxyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyXCIpLmFwcGVuZENoaWxkKGRvdHMpO1xyXG59XHJcbmFkZERvdHMoKTtcclxuXHJcblxyXG5jb250ZW50LnN0eWxlLndpZHRoID0gZWxlbWVudHMubGVuZ3RoICogcGFyc2VJbnQod2lkdGgpICsgXCJweFwiO1xyXG5cclxubmV4dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ29OZXh0KTtcclxucHJldi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ29QcmV2KTtcclxuXHJcbmxldCBpbnRlcnZhbDtcclxuXHJcbmZ1bmN0aW9uIHN0YXJ0SW50ZXJ2YWwoKSB7XHJcbiAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGdvTmV4dCwgNjAwMCk7XHJcbn1cclxuc3RhcnRJbnRlcnZhbCgpO1xyXG5cclxud3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XHJcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcclxufSlcclxuXHJcbndyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xyXG4gICAgc3RhcnRJbnRlcnZhbCgpO1xyXG59KVxyXG5cclxuc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyX19kb3RcIikuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiBjaGFuZ2VEb3RzKGUsIG51bGwpKVxyXG59KVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlRG90cyhlLCBjb2xvcikge1xyXG4gICAgaWYgKGUpIHtcclxuICAgICAgICBzbGlkZXIucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZXJfX2RvdFwiKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZXJfX2RvdC1hY3RpdmVcIik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2xpZGVyX19kb3QtYWN0aXZlXCIpO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1jb3VudFwiKTtcclxuXHJcbiAgICAgICAgY291bnQgPSBpbmRleDtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSAoY291bnQgKiBwYXJzZUludCh3aWR0aCkpIC0gcGFyc2VJbnQod2lkdGgpO1xyXG4gICAgICAgIGNvbnRlbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7cmVzdWx0fXB4KWA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgc2xpZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVyX19kb3RcIikuZm9yRWFjaCgoaXRlbSwgaW5kZXgpPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZXJfX2RvdC1hY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCsxID09PSBjb3VudCkge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwic2xpZGVyX19kb3QtYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdvTmV4dCgpIHtcclxuICAgIGlmIChjb3VudCA9PT0gZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgwKWA7XHJcbiAgICAgICAgY291bnQgPSAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IChjb3VudCAtIDEpICogcGFyc2VJbnQod2lkdGgpO1xyXG4gICAgICAgIGNvbnRlbnQuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7cmVzdWx0fXB4KWA7XHJcbiAgICB9XHJcbiAgICBjaGFuZ2VEb3RzKG51bGwsIFwiY2hhbmdlQ29sb3JcIilcclxufVxyXG5cclxuZnVuY3Rpb24gZ29QcmV2KCkge1xyXG4gICAgaWYgKGNvdW50ID09PSAxKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0oIChlbGVtZW50cy5sZW5ndGggLSAxKSAqIHBhcnNlSW50KHdpZHRoKSkgKyBcInB4XCI7XHJcbiAgICAgICAgY29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHtyZXN1bHR9KWA7XHJcbiAgICAgICAgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvdW50LS07XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gKGNvdW50ICogcGFyc2VJbnQod2lkdGgpKSAtIHBhcnNlSW50KHdpZHRoKTtcclxuICAgICAgICBjb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3Jlc3VsdH1weClgO1xyXG4gICAgfVxyXG4gICAgY2hhbmdlRG90cyhudWxsLCBcImNoYW5nZUNvbG9yXCIpXHJcbn1cclxufVxyXG5cclxuY2F0Y2gge30iXX0=
